{"remainingRequest":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huoxiyi/IdeaProjects/MissuoFrontend/src/components/ImgUpload/index.vue?vue&type=style&index=1&id=1ee0b527&scoped=true&lang=scss&","dependencies":[{"path":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/src/components/ImgUpload/index.vue","mtime":1706160678331},{"path":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/node_modules/css-loader/index.js","mtime":1706160675578},{"path":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1706160678107},{"path":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/node_modules/postcss-loader/src/index.js","mtime":1706160677279},{"path":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/node_modules/sass-loader/dist/cjs.js","mtime":1706160677744},{"path":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/node_modules/style-resources-loader/lib/index.js","mtime":1706160677827},{"path":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/node_modules/cache-loader/dist/cjs.js","mtime":1706160675340},{"path":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/node_modules/vue-loader/lib/index.js","mtime":1706160678107}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.avatar-uploader .el-icon-plus:after {\n  position: absolute;\n  display: inline-block;\n  content: ' ' !important;\n  left: calc(50% - 20px);\n  top: calc(50% - 40px);\n  width: 40px;\n  height: 40px;\n  background: url('./../../assets/icons/icon_upload@2x.png') center center\n    no-repeat;\n  background-size: 20px;\n}\n\n.el-upload-list__item-actions:hover .upload-icon {\n  display: inline-block;\n}\n.el-icon-zoom-in:before {\n  content: '\\E626';\n}\n.el-icon-delete:before {\n  content: '\\E612';\n}\n.el-upload-list__item-actions:hover {\n  opacity: 1;\n}\n.upload-item {\n  display: flex;\n  align-items: center;\n  .el-form-item__content {\n    width: 500px !important;\n  }\n}\n.upload-tips {\n  font-size: 12px;\n  color: #666666;\n  display: inline-block;\n  line-height: 17px;\n  margin-left: 36px;\n}\n.el-upload-list__item-actions {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  cursor: default;\n  text-align: center;\n  color: #fff;\n  opacity: 0;\n  font-size: 20px;\n  background-color: rgba(0, 0, 0, 0.5);\n  transition: opacity 0.3s;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader {\n  display: inline-block;\n}\n\n.avatar-uploader .el-upload:hover {\n  border-color: #ffc200;\n}\n.el-upload-span {\n  width: 100px;\n  height: 30px;\n  border: 1px solid #ffffff;\n  border-radius: 4px;\n  font-size: 14px;\n  text-align: center;\n  line-height: 30px;\n}\n\n.el-upload-span:first-child {\n  margin-bottom: 20px;\n}\n\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 200px;\n  height: 160px;\n  line-height: 160px;\n  text-align: center;\n}\n\n.avatar {\n  width: 200px;\n  height: 160px;\n  display: block;\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/ImgUpload","sourcesContent":["<!--  -->\n<template>\n  <div class=\"upload-item\">\n    <el-upload ref=\"uploadfiles\"\n               :accept=\"type\"\n               :class=\"{ borderNone: imageUrl }\"\n               class=\"avatar-uploader\"\n               action=\"/api/common/upload\"\n               :show-file-list=\"false\"\n               :on-success=\"handleAvatarSuccess\"\n               :on-remove=\"handleRemove\"\n               :on-error=\"handleError\"\n               :before-upload=\"beforeAvatarUpload\"\n               :headers=\"headers\">\n      <img v-if=\"imageUrl\"\n           :src=\"imageUrl\"\n           class=\"avatar\">\n\n      <i v-else\n         class=\"el-icon-plus avatar-uploader-icon\" />\n      <span v-if=\"imageUrl\"\n            class=\"el-upload-list__item-actions\">\n        <span class=\"el-upload-span\"\n              @click.stop=\"oploadImgDel\">\n          删除图片\n        </span>\n        <span class=\"el-upload-span\"> 重新上传 </span>\n      </span>\n    </el-upload>\n    <p class=\"upload-tips\">\n      <slot />\n    </p>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport { baseUrl } from '@/config.json'\nimport { getToken } from '@/utils/cookies'\n@Component({\n  name: 'UploadImage'\n})\nexport default class extends Vue {\n  @Prop({ default: '.jpg,.jpeg,.png' }) type: string\n  @Prop({ default: 2 }) size: number\n  @Prop({ default: '' }) propImageUrl: string\n\n  private headers = {\n    token: getToken()\n  }\n  private imageUrl = ''\n  handleRemove() {}\n\n  @Watch('propImageUrl')\n  private onChange(val) {\n    this.imageUrl = val\n  }\n\n  handleError(err, file, fileList) {\n    console.log(err, file, fileList, 'handleError')\n    this.$message({\n      message: 'Image upload failed',\n      type: 'error'\n    })\n  }\n\n  handleAvatarSuccess(response: any, file: any, fileList: any) {\n    // this.imageUrl = response.data\n    // this.imageUrl = `http://172.17.2.120:8080/common/download?name=${response.data}`\n    this.imageUrl = `${response.data}`\n    // this.imageUrl = `${baseUrl}/common/download?name=${response.data}`\n\n    this.$emit('imageChange', this.imageUrl)\n  }\n\n  oploadImgDel() {\n    this.imageUrl = ''\n    this.$emit('imageChange', this.imageUrl)\n  }\n  beforeAvatarUpload(file) {\n    const isLt2M = file.size / 1024 / 1024 < this.size\n    if (!isLt2M) {\n      this.$message({\n        message: `The size of the uploaded file cannot exceed${this.size}M!`,\n        type: 'error'\n      })\n      return false\n    }\n  }\n}\n</script>\n<style lang='scss'>\n.borderNone {\n  .el-upload {\n    border: 1px solid #d9d9d9 !important;\n  }\n}\n</style>\n<style scoped lang=\"scss\">\n.avatar-uploader .el-icon-plus:after {\n  position: absolute;\n  display: inline-block;\n  content: ' ' !important;\n  left: calc(50% - 20px);\n  top: calc(50% - 40px);\n  width: 40px;\n  height: 40px;\n  background: url('./../../assets/icons/icon_upload@2x.png') center center\n    no-repeat;\n  background-size: 20px;\n}\n\n.el-upload-list__item-actions:hover .upload-icon {\n  display: inline-block;\n}\n.el-icon-zoom-in:before {\n  content: '\\E626';\n}\n.el-icon-delete:before {\n  content: '\\E612';\n}\n.el-upload-list__item-actions:hover {\n  opacity: 1;\n}\n.upload-item {\n  display: flex;\n  align-items: center;\n  .el-form-item__content {\n    width: 500px !important;\n  }\n}\n.upload-tips {\n  font-size: 12px;\n  color: #666666;\n  display: inline-block;\n  line-height: 17px;\n  margin-left: 36px;\n}\n.el-upload-list__item-actions {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  cursor: default;\n  text-align: center;\n  color: #fff;\n  opacity: 0;\n  font-size: 20px;\n  background-color: rgba(0, 0, 0, 0.5);\n  transition: opacity 0.3s;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader {\n  display: inline-block;\n}\n\n.avatar-uploader .el-upload:hover {\n  border-color: #ffc200;\n}\n.el-upload-span {\n  width: 100px;\n  height: 30px;\n  border: 1px solid #ffffff;\n  border-radius: 4px;\n  font-size: 14px;\n  text-align: center;\n  line-height: 30px;\n}\n\n.el-upload-span:first-child {\n  margin-bottom: 20px;\n}\n\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 200px;\n  height: 160px;\n  line-height: 160px;\n  text-align: center;\n}\n\n.avatar {\n  width: 200px;\n  height: 160px;\n  display: block;\n}\n</style>\n"]}]}